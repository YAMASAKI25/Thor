以下是为你优化后的markdown格式内容，条理更清晰，各部分重点也更突出，方便阅读和理解：
# Thor
一款轻量级且可插拔的有向无环图（DAG）引擎。

# 简介

Thor 是一款专门针对具备复杂流程与逻辑的单体式信息检索系统精心打造的并行任务调度框架，具备卓越能力。它能依据任务的输入内容及输出结果，自动且精准地推导出任务间的依赖关联，并基于此生成有向无环图（DAG），进而有条不紊地开展并行任务调度工作，为提升信息检索系统的运行效率与处理能力提供有力支撑与保障。

## 功能特性

### 利用自动推导依赖关系功能

#### 深入理解任务依赖
Thor 具备自动推导任务输入和输出之间依赖关系的能力。在信息检索系统中，明确各检索子任务间的逻辑联系至关重要。

例如，在法律文献检索系统里，若要检索包含特定法律条款引用的案例，需先从法规数据库中提取相关条款的标识符（一个子任务），再依据这些标识符在案例数据库中进行匹配（另一个子任务）。这两个子任务存在依赖关系，前一任务的输出（条款标识符）即为后一任务的输入。

我们要通过仔细分析信息检索流程，标记不同任务间的依赖关系，利用 Thor 的自动推导功能来验证和优化。若推导结果与实际不符，需检查任务的输入输出定义是否准确，以此确保整个检索流程逻辑严密。

#### 构建合理的 DAG（有向无环图）
基于自动推导的依赖关系，Thor 会生成 DAG。在构建 DAG 时，要考虑将可并行执行的任务划分到不同分支。

以学术文献检索为例，若需检索某学科领域内特定主题的论文，并提取其中的实验数据和结论，可将检索论文任务和提取数据结论任务分开，因为二者在一定程度上能并行开展。检索到论文后，可同时对多篇论文进行数据提取操作。

对于 DAG 中的节点（代表任务），需合理设置其优先级。若某个任务的输出是后续多个关键任务的输入，该任务应具备较高优先级，以保障后续任务能及时进行。例如，在企业信息检索系统中，获取企业基本注册信息任务可能是后续财务信息检索、产品信息检索等任务的基础，所以此任务应优先安排。

### 并行任务调度策略

#### 资源分配优化
要了解系统的硬件资源，如 CPU 核心数、内存大小等情况。Thor 框架可依据这些硬件资源状况，合理分配并行任务。

比如，若系统有多个 CPU 核心，可将计算密集型的检索任务（像文本相似度计算、大数据量的索引搜索等）分配到不同核心上同时执行。

对于内存资源，要避免多个并行任务过度占用内存致使系统崩溃。可根据任务的内存需求估计，为每个任务设置内存限制。例如在处理大型图像数据库检索时，部分图像特征提取任务可能占用大量内存，就需要合理安排这些任务的执行顺序与资源分配，确保系统的稳定性和效率。

#### 任务监控与调整
需实时监控并行任务的执行情况，Thor 框架通常会提供相应的监控工具或接口，借助它们可查看任务的执行进度、资源使用情况等。

若发现某个任务执行时间过长或占用资源过多，可暂停或调整该任务的优先级。例如，在多媒体信息检索系统中，音频特征提取任务可能因音频文件格式问题或数据损坏而出现异常长时间执行的情况。通过监控发现该问题后，可暂停此任务，修复相关音频文件后重新安排任务执行，同时调整其他并行任务的资源分配，以降低对整体检索效率的影响。 